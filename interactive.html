<html>

<head>
</head>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div style="height: 50%;">
    <span>Normalize: </span><input type="checkbox" name="normalized_checkbox" checked=""
        onclick="normalized_checked(this)" />
    <canvas id="mainBarChart">Your browser does not support the canvas element.</canvas>
</div>
<div style="height: 30%;">
    <canvas id="totalWaterPie">Your browser does not support the canvas element.</canvas>
</div>

<div style="height: 30%;">
    <canvas id="percentScatterChart">Your browser does not support the canvas element.</canvas>
</div>

<script>
    const random_colors = ['#1f77b4', '#ff7f0e', '#2ca02c', '#98df8a', '#d62728', '#ff9896', '#9467bd', '#c5b0d5', '#8c564b', '#c49c94', '#e377c2', '#f7b6d2', '#7f7f7f', '#bcbd22', '#dbdb8d', '#17becf', '#9edae5'];

    var json_full_merged_pivot = { "columns": ["Almonds", "Apples", "Apricots", "Artichokes", "Asparagus", "Blueberries", "Broccoli", "Cabbage", "Cantaloupe", "Carrots", "Cauliflower", "Cherries", "Corn", "Cucumbers", "Figs", "Garlic", "Grapefruit", "Honeydew", "Kiwifruit", "Lemons", "Lettuce", "Nectarines", "Oats", "Olives", "Onions", "Oranges", "Peaches", "Pears", "Peppers", "Pistachios", "Plums", "Potatoes", "Pumpkins", "Raspberries", "Rice", "Spinach", "Squash", "Strawberries", "Sweet Potatoes", "Tomatoes", "Walnuts", "Watermelon"], "index": ["1996-2005 Average Water Footprint (cubic meters\/tonne)", "2004-2015 Average Price ($USD\/tonne)", "2004-2015 Average Price (rank)", "2014 Production (tonnes)", "2014 Total Value ($USD)", "2014 Value: Water Footprint Ratio", "2014 Water Footprint (cubic meters)", "Average Nutrient Rank", "Calcium (mg)", "Calcium (mg) Rank", "Fiber (g)", "Fiber Rank", "Iron (mg)", "Iron (mg) Rank", "Magnesium (mg)", "Magnesium (mg) Rank", "NDB Number", "Potassium (mg)", "Potassium (mg) Rank", "Protein (g)", "Protein Rank", "Saturated Fat (g)", "Saturated Fat Rank", "Sodium (mg)", "Sodium (mg) Rank", "Vitamin A (\u03bcg)", "Vitamin A (\u03bcg) Rank", "Vitamin C (mg)", "Vitamin C (mg) Rank", "Vitamin E (mg)", "Vitamin E (mg) Rank", "Water Footprint Rank_x", "Water Footprint Rank_y"], "data": [[12984.0, 452.0, 998.0, 789.0, 2645.0, 674.0, 296.0, 287.0, 180.0, 123.0, 296.0, 1649.0, 501.0, 413.0, 1015.0, 380.0, 202.0, 180.0, 797.0, 223.0, 112.0, 630.0, 2704.0, 1074.0, 148.0, 219.0, 630.0, 362.0, 230.0, 3410.0, 919.0, 1689.0, 276.0, 383.0, 1650.0, 178.0, 276.0, 135.0, 817.0, 639.0, 6718.0, 231.0], [8265.0, 786.0, 1065.0, 1389.0, 2427.0, 5879.0, 675.0, 359.0, 353.0, 332.0, 950.0, 3833.0, 504.0, 777.0, 1920.0, 979.0, 558.0, 377.0, 1357.0, 670.0, 370.0, 1572.0, 220.0, 1042.0, 407.0, 516.0, 523.0, 674.0, 641.0, 4662.0, 1574.0, 346.0, 311.0, 5216.0, 368.0, 1063.0, 608.0, 2024.0, 589.0, 894.0, 2126.0, 314.0], [1.0, 22.0, 16.0, 13.0, 6.0, 2.0, 24.0, 38.0, 39.0, 41.0, 20.0, 5.0, 33.0, 23.0, 9.0, 19.0, 30.0, 35.0, 14.0, 26.0, 36.0, 11.0, 44.0, 18.0, 34.0, 32.0, 31.0, 25.0, 27.0, 4.0, 10.0, 40.0, 43.0, 3.0, 37.0, 17.0, 28.0, 8.0, 29.0, 21.0, 7.0, 42.0], [1039884.0, 172592.0, 86393.0, 33046.0, 23387.0, 22437.0, 454000.0, 369680.0, 455832.0, 200200.0, 182381.0, 40325.0, 167589.0, 34189.0, 13409.0, 194362.0, 139348.0, 111958.0, 75157.0, 733330.0, 1812290.0, 209800.0, 14440.0, 129555.0, 1222946.0, 1732575.0, 426520.0, 154502.0, 471450.0, 273372.0, 197508.0, 719431.0, 69937.0, 84040.0, 1983390.0, 15704.0, 40271.0, 942472.0, 305400.0, 521350.0, 674200.0, 316994.0], [7611860700.0, 99243300.0, 71955800.0, 48167260.0, 61056388.0, 120622800.0, 412776790.0, 127380120.0, 152852800.0, 40881000.0, 197891000.0, 185487640.0, 85109400.0, 17505740.0, 31027690.0, 246155790.0, 77737200.0, 48209000.0, 121531200.0, 736076600.0, 927094000.0, 302243300.0, 2646800.0, 104516500.0, 345086930.0, 1215176100.0, 309511500.0, 80078000.0, 308687520.0, 1650705000.0, 245025900.0, 179694670.0, 24940900.0, 462129000.0, 846270000.0, 19861000.0, 29199700.0, 1834816000.0, 243541000.0, 354707000.0, 2356584000.0, 108088100.0], [0.621, 1.402, 0.92, 2.036, 1.088, 8.792, 3.386, 1.323, 2.054, 1.83, 4.041, 3.075, 1.117, 1.367, 2.513, 3.674, 3.044, 2.637, 2.236, 4.962, 5.035, 2.521, 0.075, 0.828, 2.102, 3.53, 1.27, 1.578, 3.138, 1.952, 1.488, 0.163, 1.424, 15.826, 0.285, 7.832, 2.896, 15.896, 1.076, 1.174, 0.574, 1.627], [12248679290.0, 70770939.0, 78217685.0, 23653301.0, 56117208.0, 13718940.0, 121911149.0, 96250659.0, 74434312.0, 22339068.0, 48974179.0, 60324106.0, 76169148.0, 12809504.0, 12346910.0, 67002471.0, 25535712.0, 18281991.0, 54340499.0, 148354313.0, 184137218.0, 119906270.0, 35421728.0, 126227599.0, 164196864.0, 344216765.0, 243767504.0, 50738607.0, 98369245.0, 845676514.0, 164663015.0, 1102337693.0, 17511040.0, 29199854.0, 2968847734.0, 2535865.0, 10083176.0, 115424522.0, 226353362.0, 302222015.0, 4108890885.0, 66429179.0], [13.3, 30.2, 18.1, 14.7, 18.0, 26.5, 14.0, 20.5, 26.5, 20.2, 23.8, 23.5, 23.4, 27.7, 22.0, 19.6, 24.9, 32.0, 15.8, 23.1, 19.2, 23.3, 18.8, 24.9, 29.9, 19.3, 24.5, 29.5, 23.1, 10.4, 28.7, 21.0, 19.6, 15.9, 26.8, 12.5, 22.9, 21.7, 18.7, 23.7, 15.8, 28.0], [268.6, 6.4, 12.9, 44.0, 23.9, 6.1, 46.6, 40.4, 9.0, 32.7, 22.4, 13.0, 2.0, 16.0, 35.7, 181.0, 12.2, 5.9, 33.9, 25.9, 36.0, 6.3, 54.0, 88.0, 23.1, 40.0, 5.8, 9.3, 10.0, 105.0, 6.1, 11.8, 21.0, 25.2, 28.0, 100.0, 15.0, 15.8, 30.0, 10.0, 98.3, 7.2], [1.0, 37.0, 28.0, 9.0, 20.0, 39.0, 8.0, 10.0, 35.0, 15.0, 22.0, 27.0, 43.0, 24.0, 13.0, 2.0, 29.0, 41.0, 14.0, 18.0, 12.0, 38.0, 7.0, 6.0, 21.0, 11.0, 42.0, 34.0, 31.5, 3.0, 40.0, 30.0, 23.0, 19.0, 17.0, 4.0, 26.0, 25.0, 16.0, 31.5, 5.0, 36.0], [12.5, 2.4, 2.0, 5.4, 2.1, 2.4, 2.6, 2.5, 0.9, 2.8, 2.0, 2.1, 2.3, 0.5, 2.9, 2.1, 1.1, 0.8, 3.0, 2.8, 1.3, 1.7, 10.6, 3.2, 1.7, 2.4, 1.5, 3.1, 1.7, 10.6, 1.4, 2.1, 0.5, 6.5, 1.3, 2.2, 1.1, 2.0, 3.1, 1.2, 6.7, 0.4], [1.0, 17.0, 25.0, 6.0, 24.0, 16.0, 14.0, 15.0, 39.0, 12.0, 27.0, 21.0, 19.0, 41.5, 11.0, 22.5, 36.0, 40.0, 10.0, 13.0, 34.0, 30.0, 2.5, 7.0, 29.0, 18.0, 31.0, 9.0, 28.0, 2.5, 32.0, 22.5, 41.5, 5.0, 33.0, 20.0, 37.0, 26.0, 8.0, 35.0, 4.0, 43.0], [3.7, 0.1, 0.4, 1.3, 2.1, 0.3, 0.7, 0.5, 0.2, 0.3, 0.4, 0.4, 0.5, 0.3, 0.4, 1.7, 0.1, 0.2, 0.3, 0.6, 0.8, 0.3, 4.7, 3.3, 0.2, 0.1, 0.2, 0.2, 0.4, 4.0, 0.2, 0.8, 0.8, 0.7, 0.8, 2.7, 0.4, 0.4, 0.6, 0.3, 2.9, 0.2], [3.0, 41.0, 22.0, 9.0, 7.0, 32.0, 14.0, 19.0, 37.0, 29.5, 20.0, 24.0, 18.0, 29.5, 26.0, 8.0, 43.0, 39.0, 28.0, 17.0, 11.0, 31.0, 1.0, 4.0, 36.0, 42.0, 34.0, 38.0, 23.0, 2.0, 40.0, 13.0, 11.0, 15.0, 11.0, 6.0, 27.0, 21.0, 16.0, 33.0, 5.0, 35.0], [270.0, 4.8, 10.3, 60.0, 14.2, 6.1, 20.5, 12.4, 12.2, 11.8, 15.0, 10.9, 37.0, 13.0, 17.9, 25.0, 7.8, 10.0, 16.9, 8.0, 13.0, 9.1, 177.0, 4.0, 10.0, 10.0, 9.1, 6.7, 10.7, 121.0, 7.3, 22.9, 12.0, 22.0, 25.0, 80.0, 16.8, 13.2, 25.9, 11.1, 158.3, 9.9], [1.0, 42.0, 29.0, 6.0, 18.0, 41.0, 13.0, 22.0, 23.0, 25.0, 17.0, 27.0, 7.0, 20.5, 14.0, 9.5, 37.0, 31.0, 15.0, 36.0, 20.5, 34.5, 2.0, 43.0, 31.0, 31.0, 34.5, 40.0, 28.0, 4.0, 39.0, 11.0, 24.0, 12.0, 9.5, 5.0, 16.0, 19.0, 8.0, 26.0, 3.0, 33.0], [12061.0, 9003.0, 9021.0, 11007.0, 11011.0, 9050.0, 11090.0, 11109.0, 9181.0, 11124.0, 11135.0, 9070.0, 11167.0, 11205.0, 9089.0, 11215.0, 9111.0, 9184.0, 9148.0, 9150.0, 11253.0, 9091.0, 20038.0, 9193.0, 11282.0, 9200.0, 9326.0, 9252.0, 11333.0, 12151.0, 9279.0, 11352.0, 11422.0, 9302.0, 20444.0, 11457.0, 11641.0, 9316.0, 11507.0, 11529.0, 12155.0, 9326.0], [733.0, 107.2, 258.7, 370.0, 202.2, 77.0, 315.9, 169.7, 267.3, 320.0, 299.1, 221.7, 270.0, 147.0, 232.1, 400.0, 139.1, 228.2, 311.9, 138.2, 194.0, 200.7, 429.0, 8.0, 146.3, 181.1, 190.3, 116.0, 175.0, 1025.0, 157.0, 421.2, 340.0, 151.2, 115.0, 556.7, 261.9, 153.3, 337.0, 237.2, 440.8, 111.8], [2.0, 41.0, 18.0, 8.0, 23.0, 42.0, 12.0, 30.0, 16.0, 11.0, 14.0, 22.0, 15.0, 34.0, 20.0, 7.0, 36.0, 21.0, 13.0, 37.0, 25.0, 24.0, 5.0, 43.0, 35.0, 28.0, 27.0, 38.0, 29.0, 1.0, 31.0, 6.0, 9.0, 33.0, 39.0, 3.0, 17.0, 32.0, 10.0, 19.0, 4.0, 40.0], [21.2, 0.3, 1.4, 3.3, 2.2, 0.7, 2.8, 1.3, 0.8, 0.9, 1.9, 1.1, 3.3, 0.7, 0.8, 6.3, 0.6, 0.5, 1.1, 1.1, 1.3, 1.1, 16.9, 0.9, 1.1, 0.9, 0.9, 0.4, 0.9, 20.2, 0.7, 2.0, 1.0, 1.2, 7.1, 2.9, 1.2, 0.7, 1.6, 0.9, 15.2, 0.6], [1.0, 43.0, 15.0, 8.0, 11.0, 34.0, 10.0, 17.0, 32.0, 27.0, 13.0, 24.0, 7.0, 37.0, 33.0, 6.0, 39.0, 41.0, 20.0, 22.0, 16.0, 23.0, 3.0, 30.0, 21.0, 26.0, 29.0, 42.0, 28.0, 2.0, 36.0, 12.0, 25.0, 19.0, 5.0, 9.0, 18.0, 38.0, 14.0, 31.0, 4.0, 40.0], [3.8, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.1, 0.0, 0.1, 0.0, 0.3, 0.0, 0.1, 0.1, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.2, 1.4, 0.0, 0.0, 0.0, 0.0, 0.0, 5.9, 0.2, 0.0, 0.1, 0.0, 0.1, 0.1, 0.0, 0.0, 0.5, 0.0, 6.1, 0.0], [41.0, 16.0, 13.0, 1.0, 24.0, 14.0, 22.0, 18.0, 28.0, 19.0, 32.0, 20.0, 37.0, 2.0, 30.0, 34.0, 3.0, 21.0, 17.0, 23.0, 7.0, 11.0, 39.0, 40.0, 25.0, 4.0, 9.0, 10.0, 27.0, 42.0, 36.0, 12.0, 35.0, 8.0, 33.0, 31.0, 26.0, 5.0, 38.0, 15.0, 43.0, 6.0], [1.0, 0.8, 1.3, 94.0, 2.2, 0.7, 33.0, 18.0, 16.0, 69.1, 29.9, 0.0, 15.0, 1.7, 0.0, 17.0, 0.0, 18.2, 2.8, 1.9, 28.0, 0.0, 2.0, 735.0, 3.8, 0.0, 0.0, 1.3, 2.7, 1.0, 0.0, 5.9, 1.0, 0.8, 5.0, 80.0, 1.8, 1.3, 55.0, 5.0, 1.7, 0.0], [13.0, 10.0, 15.0, 42.0, 24.0, 9.0, 38.0, 34.0, 32.0, 40.0, 37.0, 4.5, 31.0, 19.0, 4.5, 33.0, 4.5, 35.0, 26.0, 21.0, 36.0, 4.5, 23.0, 43.0, 27.0, 4.5, 4.5, 17.0, 25.0, 13.0, 4.5, 30.0, 13.0, 11.0, 28.5, 41.0, 20.0, 16.0, 39.0, 28.5, 18.0, 4.5], [0.0, 3.2, 96.1, 1.3, 38.1, 2.7, 30.7, 4.5, 169.2, 834.5, 0.0, 2.9, 9.0, 5.0, 7.1, 0.0, 46.1, 2.9, 4.0, 0.9, 370.0, 16.8, 0.0, 20.3, 0.0, 11.1, 16.2, 1.3, 18.0, 26.0, 17.0, 0.0, 426.0, 1.6, 0.0, 470.0, 9.7, 1.3, 709.0, 42.2, 0.8, 28.3], [40.0, 27.0, 7.0, 32.5, 10.0, 30.0, 11.0, 24.0, 6.0, 1.0, 40.0, 29.0, 21.0, 23.0, 22.0, 40.0, 8.0, 28.0, 25.0, 35.0, 5.0, 17.0, 40.0, 14.0, 40.0, 19.0, 18.0, 32.5, 15.0, 13.0, 16.0, 40.0, 4.0, 31.0, 40.0, 3.0, 20.0, 34.0, 2.0, 9.0, 36.0, 12.0], [0.0, 4.6, 10.0, 11.7, 5.6, 9.7, 89.2, 36.6, 36.7, 5.9, 48.2, 7.0, 6.8, 2.8, 2.1, 31.2, 34.4, 18.0, 92.7, 53.0, 9.2, 5.4, 0.0, 0.9, 7.4, 53.2, 6.6, 4.3, 80.4, 5.6, 9.5, 19.7, 9.0, 26.2, 0.0, 28.0, 17.0, 58.8, 2.4, 13.7, 1.3, 8.1], [42.0, 33.0, 19.0, 18.0, 31.0, 20.0, 2.0, 9.0, 8.0, 29.0, 7.0, 26.0, 27.0, 36.0, 38.0, 11.0, 10.0, 15.0, 1.0, 6.0, 22.0, 32.0, 42.0, 40.0, 25.0, 5.0, 28.0, 34.0, 3.0, 30.0, 21.0, 14.0, 23.0, 13.0, 42.0, 12.0, 16.0, 4.0, 37.0, 17.0, 39.0, 24.0], [25.6, 0.2, 0.9, 0.2, 1.1, 0.6, 0.8, 0.1, 0.1, 0.7, 0.1, 0.1, 0.1, 0.0, 0.1, 0.0, 0.1, 0.0, 1.5, 0.2, 0.2, 0.8, 0.0, 1.7, 0.0, 0.2, 0.7, 0.1, 0.4, 2.9, 0.3, 0.0, 1.1, 0.9, 0.0, 2.0, 0.1, 0.3, 0.3, 0.5, 0.7, 0.1], [1.0, 25.0, 8.0, 22.0, 6.0, 15.0, 10.0, 27.0, 36.0, 14.0, 33.0, 34.0, 32.0, 38.0, 31.0, 42.5, 28.0, 40.0, 5.0, 26.0, 23.0, 11.0, 42.5, 4.0, 39.0, 24.0, 12.0, 30.0, 17.0, 2.0, 20.0, 41.0, 7.0, 9.0, 37.0, 3.0, 29.0, 19.0, 18.0, 16.0, 13.0, 35.0], [43.0, 22.0, 33.0, 29.0, 39.0, 28.0, 17.0, 15.0, 7.0, 2.0, 17.0, 36.0, 23.0, 21.0, 34.0, 19.0, 8.0, 7.0, 30.0, 10.0, 1.0, 26.0, 40.0, 35.0, 4.0, 9.0, 26.0, 18.0, 11.0, 41.0, 32.0, 38.0, 14.0, 20.0, 37.0, 5.0, 14.0, 3.0, 31.0, 27.0, 42.0, 12.0], [45.0, 23.0, 35.0, 31.0, 41.0, 30.0, 17.0, 15.0, 7.0, 2.0, 17.0, 38.0, 24.0, 22.0, 36.0, 20.0, 8.0, 7.0, 32.0, 10.0, 1.0, 28.0, 42.0, 37.0, 4.0, 9.0, 28.0, 19.0, 11.0, 43.0, 34.0, 40.0, 14.0, 21.0, 39.0, 5.0, 14.0, 3.0, 33.0, 29.0, 44.0, 12.0]] };
    var json_cmeter_per_foot = { "columns": ["Almonds", "Apples", "Apricots", "Artichokes", "Asparagus", "Blueberries", "Broccoli", "Cabbage", "Cantaloupe", "Carrots", "Cauliflower", "Cherries", "Corn", "Cucumbers", "Figs", "Garlic", "Grapefruit", "Honeydew", "Kiwifruit", "Lemons", "Lettuce", "Nectarines", "Oats", "Olives", "Onions", "Oranges", "Peaches", "Pears", "Peppers", "Pistachios", "Plums", "Potatoes", "Pumpkins", "Raspberries", "Rice", "Spinach", "Squash", "Strawberries", "Sweet Potatoes", "Tomatoes", "Walnuts", "Watermelon"], "index": ["2004-2015 Average Price ($USD\/tonne)\/H2O-print", "2014 Production (tonnes)\/H2O-print", "2014 Total Value ($USD)\/H2O-print", "Calcium (mg)\/H2O-print", "Fiber (g)\/H2O-print", "Iron (mg)\/H2O-print", "Magnesium (mg)\/H2O-print", "Potassium (mg)\/H2O-print", "Protein (g)\/H2O-print", "Saturated Fat (g)\/H2O-print", "Sodium (mg)\/H2O-print", "Vitamin A (\u03bcg)\/H2O-print", "Vitamin C (mg)\/H2O-print", "Vitamin E (mg)\/H2O-print"], "data": [[0.6365526802, 1.7389380531, 1.0671342685, 1.7604562738, 0.9175803403, 8.7225519288, 2.2804054054, 1.2508710801, 1.9611111111, 2.6991869919, 3.2094594595, 2.324439054, 1.005988024, 1.8813559322, 1.8916256158, 2.5763157895, 2.7623762376, 2.0944444444, 1.7026348808, 3.0044843049, 3.3035714286, 2.4952380952, 0.0813609467, 0.9702048417, 2.75, 2.3561643836, 0.8301587302, 1.861878453, 2.7869565217, 1.3671554252, 1.7127312296, 0.2048549438, 1.1268115942, 13.6187989556, 0.223030303, 5.9719101124, 2.2028985507, 14.9925925926, 0.7209302326, 1.3990610329, 0.3164632331, 1.3593073593], [80.0896487985, 381.8407079646, 86.5661322645, 41.8833967047, 8.8419659735, 33.2893175074, 1533.7837837838, 1288.0836236934, 2532.4, 1627.6422764228, 616.152027027, 24.4542146756, 334.5089820359, 82.7820823245, 13.2108374384, 511.4789473684, 689.8415841584, 621.9888888889, 94.2998745295, 3288.4753363229, 16181.1607142857, 333.0158730159, 5.3402366864, 120.6284916201, 8263.1486486486, 7911.301369863, 677.0158730159, 426.8011049724, 2049.7826086957, 80.1677419355, 214.9162132753, 425.9508584962, 253.3949275362, 219.4255874674, 1202.0545454545, 88.2247191011, 145.9094202899, 6981.2740740741, 373.8066095471, 815.8841940532, 100.3572491813, 1372.2683982684], [586249.2837338262, 219564.8230088495, 72100.0, 61048.4917617237, 23083.7005671077, 178965.5786350148, 1394516.1824324324, 443833.1707317073, 849182.2222222222, 332365.8536585366, 668550.6756756756, 112484.9241964827, 169879.0419161677, 42386.7796610169, 30569.1527093596, 647778.3947368421, 384837.6237623763, 267827.7777777778, 152485.8218318695, 3300791.9282511212, 8277625.0, 479751.2698412698, 978.8461538462, 97315.1769087523, 2331668.445945946, 5548749.3150684936, 491288.0952380953, 221209.9447513812, 1342119.6521739131, 484077.7126099707, 266622.3068552774, 106391.1604499704, 90365.5797101449, 1206603.1331592689, 512890.9090909091, 111578.6516853933, 105796.0144927536, 13591229.6296296287, 298091.7992656059, 555097.0266040688, 350786.5436141709, 467913.8528138528], [0.0206869994, 0.014159292, 0.0129258517, 0.0557667934, 0.0090359168, 0.0090504451, 0.1574324324, 0.1407665505, 0.05, 0.2658536585, 0.0756756757, 0.0078835658, 0.003992016, 0.0387409201, 0.0351724138, 0.4763157895, 0.0603960396, 0.0327777778, 0.0425345044, 0.1161434978, 0.3214285714, 0.01, 0.0199704142, 0.0819366853, 0.1560810811, 0.1826484018, 0.0092063492, 0.0256906077, 0.0434782609, 0.0307917889, 0.0066376496, 0.0069863825, 0.0760869565, 0.0657963446, 0.016969697, 0.5617977528, 0.0543478261, 0.117037037, 0.0367197062, 0.0156494523, 0.0146323311, 0.0311688312], [0.0009627234, 0.0053097345, 0.002004008, 0.0068441065, 0.0007939509, 0.0035608309, 0.0087837838, 0.0087108014, 0.005, 0.0227642276, 0.0067567568, 0.0012734991, 0.0045908184, 0.0012106538, 0.0028571429, 0.0055263158, 0.0054455446, 0.0044444444, 0.0037641154, 0.0125560538, 0.0116071429, 0.0026984127, 0.0039201183, 0.0029795158, 0.0114864865, 0.0109589041, 0.0023809524, 0.0085635359, 0.0073913043, 0.0031085044, 0.001523395, 0.0012433393, 0.0018115942, 0.0169712794, 0.0007878788, 0.0123595506, 0.0039855072, 0.0148148148, 0.0037943696, 0.0018779343, 0.0009973206, 0.0017316017], [0.0002849661, 0.0002212389, 0.0004008016, 0.0016476553, 0.0007939509, 0.0004451039, 0.0023648649, 0.0017421603, 0.0011111111, 0.0024390244, 0.0013513514, 0.0002425713, 0.000998004, 0.0007263923, 0.0003940887, 0.0044736842, 0.0004950495, 0.0011111111, 0.0003764115, 0.002690583, 0.0071428571, 0.0004761905, 0.0017381657, 0.0030726257, 0.0013513514, 0.000456621, 0.0003174603, 0.0005524862, 0.0017391304, 0.0011730205, 0.0002176279, 0.000473653, 0.0028985507, 0.0018276762, 0.0004848485, 0.0151685393, 0.0014492754, 0.002962963, 0.0007343941, 0.0004694836, 0.0004316761, 0.0008658009], [0.0207948244, 0.010619469, 0.0103206413, 0.0760456274, 0.00536862, 0.0090504451, 0.0692567568, 0.0432055749, 0.0677777778, 0.0959349593, 0.0506756757, 0.0066100667, 0.0738522954, 0.0314769976, 0.017635468, 0.0657894737, 0.0386138614, 0.0555555556, 0.0212045169, 0.0358744395, 0.1160714286, 0.0144444444, 0.0654585799, 0.0037243948, 0.0675675676, 0.0456621005, 0.0144444444, 0.0185082873, 0.0465217391, 0.035483871, 0.0079434168, 0.0135583185, 0.0434782609, 0.0574412533, 0.0151515152, 0.4494382022, 0.0608695652, 0.0977777778, 0.0317013464, 0.017370892, 0.0235635606, 0.0428571429], [0.0564540974, 0.2371681416, 0.2592184369, 0.4689480355, 0.0764461248, 0.1142433234, 1.0672297297, 0.5912891986, 1.485, 2.6016260163, 1.010472973, 0.1344451183, 0.5389221557, 0.3559322034, 0.2286699507, 1.0526315789, 0.6886138614, 1.2677777778, 0.3913425345, 0.6197309417, 1.7321428571, 0.3185714286, 0.1586538462, 0.0074487896, 0.9885135135, 0.8269406393, 0.3020634921, 0.320441989, 0.7608695652, 0.3005865103, 0.1708378672, 0.2493783304, 1.231884058, 0.3947780679, 0.0696969697, 3.1275280899, 0.9489130435, 1.1355555556, 0.4124847001, 0.3712050078, 0.0656147663, 0.483982684], [0.0016327788, 0.0006637168, 0.0014028056, 0.0041825095, 0.000831758, 0.0010385757, 0.0094594595, 0.0045296167, 0.0044444444, 0.0073170732, 0.0064189189, 0.000667071, 0.0065868263, 0.0016949153, 0.0007881773, 0.0165789474, 0.002970297, 0.0027777778, 0.0013801757, 0.0049327354, 0.0116071429, 0.0017460317, 0.00625, 0.0008379888, 0.0074324324, 0.004109589, 0.0014285714, 0.0011049724, 0.0039130435, 0.0059237537, 0.0007616975, 0.0011841326, 0.0036231884, 0.0031331593, 0.0043030303, 0.0162921348, 0.0043478261, 0.0051851852, 0.0019583843, 0.0014084507, 0.0022625781, 0.0025974026], [0.0002926679, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0005555556, 0.0, 0.0003378378, 0.0, 0.0005988024, 0.0, 0.0000985222, 0.0002631579, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.000443787, 0.0013035382, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0017302053, 0.0002176279, 0.0, 0.0003623188, 0.0, 0.0000606061, 0.0005617978, 0.0, 0.0, 0.0006119951, 0.0, 0.0009080083, 0.0], [0.0000770179, 0.0017699115, 0.0013026052, 0.1191381496, 0.000831758, 0.0010385757, 0.1114864865, 0.06271777, 0.0888888889, 0.5617886179, 0.1010135135, 0.0, 0.0299401198, 0.0041162228, 0.0, 0.0447368421, 0.0, 0.1011111111, 0.0035131744, 0.0085201794, 0.25, 0.0, 0.000739645, 0.6843575419, 0.0256756757, 0.0, 0.0, 0.0035911602, 0.0117391304, 0.0002932551, 0.0, 0.0034931912, 0.0036231884, 0.0020887728, 0.003030303, 0.4494382022, 0.0065217391, 0.0096296296, 0.0673194614, 0.0078247261, 0.0002530515, 0.0], [0.0, 0.007079646, 0.0962925852, 0.0016476553, 0.0144045369, 0.0040059347, 0.1037162162, 0.0156794425, 0.94, 6.7845528455, 0.0, 0.0017586416, 0.0179640719, 0.0121065375, 0.0069950739, 0.0, 0.2282178218, 0.0161111111, 0.0050188206, 0.0040358744, 3.3035714286, 0.0266666667, 0.0, 0.0189013035, 0.0, 0.0506849315, 0.0257142857, 0.0035911602, 0.0782608696, 0.0076246334, 0.0184983678, 0.0, 1.5434782609, 0.0041775457, 0.0, 2.6404494382, 0.0351449275, 0.0096296296, 0.8678090575, 0.0660406886, 0.0001190831, 0.1225108225], [0.0, 0.0101769912, 0.0100200401, 0.0148288973, 0.0021172023, 0.0143916914, 0.3013513514, 0.1275261324, 0.2038888889, 0.0479674797, 0.1628378378, 0.004244997, 0.0135728543, 0.006779661, 0.0020689655, 0.0821052632, 0.1702970297, 0.1, 0.1163111669, 0.2376681614, 0.0821428571, 0.0085714286, 0.0, 0.0008379888, 0.05, 0.2429223744, 0.0104761905, 0.011878453, 0.3495652174, 0.0016422287, 0.0103373232, 0.0116637063, 0.0326086957, 0.0684073107, 0.0, 0.1573033708, 0.0615942029, 0.4355555556, 0.0029375765, 0.0214397496, 0.00019351, 0.0350649351], [0.0019716574, 0.0004424779, 0.0009018036, 0.0002534854, 0.000415879, 0.0008902077, 0.0027027027, 0.0003484321, 0.0005555556, 0.0056910569, 0.0003378378, 0.0000606428, 0.0001996008, 0.0, 0.0000985222, 0.0, 0.0004950495, 0.0, 0.0018820577, 0.000896861, 0.0017857143, 0.0012698413, 0.0, 0.0015828678, 0.0, 0.000913242, 0.0011111111, 0.0002762431, 0.0017391304, 0.0008504399, 0.0003264418, 0.0, 0.0039855072, 0.0023498695, 0.0, 0.0112359551, 0.0003623188, 0.0022222222, 0.0003671971, 0.0007824726, 0.0001041977, 0.0004329004]] };
    crops = json_cmeter_per_foot['columns'];
    index = json_cmeter_per_foot['index'];
    data = json_cmeter_per_foot['data'];

    full_index = json_full_merged_pivot['index']
    full_data = json_full_merged_pivot['data']
    var name_to_data_row = {};
    for (let i = 0; i < full_index.length; i++) {
        name_to_data_row[full_index[i]] = full_data[i]
    }

    var do_normalization = true;
    var ctx = document.getElementById('mainBarChart').getContext('2d');
    var mainBarChart = new Chart(ctx, {
        type: 'bar',

        data: {
            labels: crops,
            datasets: []
        },

        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            },

            responsive: true,
            maintainAspectRatio: false,

            plugins: {
                title: {
                    display: true,
                    text: 'Nutrient or Metric per "Water Footprint"'
                },
                subtitle: {
                    display: true,
                    text: '"Water Footprint" = Cubic-meters of water per tonne of crop produced.'
                },

                legend: {
                    display: true,
                    position: 'left',
                },
            },
        }
    });



    function re_show_data() {
        var already_has_data = mainBarChart.data.datasets.length != 0;
        for (let i = 0; i < index.length; i++) {

            normalized = [];
            maximum = Math.max(...data[i]);
            for (const raw of data[i]) {
                normalized.push(raw / maximum);
            }

            to_append = {
                label: index[i],
                data: do_normalization ? normalized : data[i],
                backgroundColor: random_colors[i], //['#3366c8'],
                borderColor: ['#000000'],
                borderWidth: 1,
                hidden: true,
            };

            if (already_has_data) {
                mainBarChart.data.datasets[i] = to_append;
            } else {
                mainBarChart.data.datasets.push(to_append);
            }

        }

        mainBarChart.update();
    }


    function normalized_checked(checkbox) {
        do_normalization = checkbox.checked;
        re_show_data();
    }

    re_show_data();
    mainBarChart.data.datasets[3].hidden = false; // default to this shown
    mainBarChart.data.datasets[4].hidden = false;
    mainBarChart.update();



    //////////////////


    var pie_ctx = document.getElementById('totalWaterPie').getContext('2d');
    var totalWaterPieChart = new Chart(pie_ctx, {
        type: 'pie',

        data: {
            labels: json_full_merged_pivot['columns'],
            datasets: [{
                // label: '',
                data: name_to_data_row['2014 Water Footprint (cubic meters)'],
                backgroundColor: random_colors,
            }]
        },

        options: {
            responsive: true,
            maintainAspectRatio: false,

            plugins: {
                title: {
                    display: true,
                    text: '2014 Total water volume (of the chosen crops) (cubic meters)'
                },

                legend: {
                    display: true,
                    position: 'left',
                },
            },
        }
    });


    //////////////////

    var percent_bar_ctx = document.getElementById('percentScatterChart').getContext('2d');
    var percentScatterChart = new Chart(percent_bar_ctx, {
        type: 'scatter',

        data: {
            // labels: json_full_merged_pivot['columns'],
            // labels: ["Label 1", "Label 2", "Label 3"],
            datasets: [
                {
                    label: 'Apple',
                    data: [{ x: 10, y: 20, crop:'toody'}]
                },
                {
                    label: 'Banana',
                    data: [{ x: 5, y: 5 },]
                }
            ]
        },

        options: {
            responsive: true,
            maintainAspectRatio: false,


            scales: {
                y: {
                    beginAtZero: true
                },
                x: {
                    beginAtZero: true
                }
            },

            plugins: {
                title: {
                    display: true,
                    text: ''
                },

                legend: {
                    display: true,
                    position: 'left',
                },

                tooltip: {
                    callbacks: {
                        label: function (tooltipItem) {
                            // var label = tooltipItem.dataset.label;
                            var label = tooltipItem.raw.crop;
                            return label + ': (' + tooltipItem.parsed.x + ', ' + tooltipItem.parsed.y + ')';
                        }
                    }
                },
            },
        }
    });




</script>


</html>